<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Booking — Siri Makeovers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="card" style="margin:24px;">
    <a href="/">← Back to Home</a>
    <h1>Book an Appointment</h1>
    <form id="bookingForm">
      <label for="name">Name</label>
      <input id="name" name="name" required>
      <label for="phone">Phone</label>
      <input id="phone" name="phone" required>
      <label for="date">Preferred Date</label>
      <input id="date" name="date" type="date" required>
      <label for="service">Service</label>
      <select id="service" name="service">
        <option>Bridal Makeup</option>
        <option>Hair Styling</option>
        <option>Mehendi Design</option>
        <option>Saree Draping</option>
        <option>Facial / Skincare</option>
      </select>
      <button type="submit">Send Booking Request</button>
    </form>
    <div id="msg" class="msg" style="display:none;margin-top:12px;padding:10px;border-radius:8px;background:#f0fff4;color:#064e3b;"></div>
  </div>
  <script>
    document.getElementById('bookingForm').addEventListener('submit', async function(e){
      e.preventDefault();
      const payload = {
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        date: document.getElementById('date').value,
        serviceType: document.getElementById('service').value
      };
      try {
        const res = await fetch('/api/bookings', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const text = await res.text();
        const msg = document.getElementById('msg');
        msg.style.display = 'block';
        msg.textContent = text;
        document.getElementById('bookingForm').reset();
      } catch(err) {
        alert('Failed to send booking: ' + err);
      }
    });
  </script>
</body>
</html>
